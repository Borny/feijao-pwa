import{Q}from"./QSpinnerTail.3593ff5c.js";import{al as $,d as C,r as u,o as S,aq as w,ar as h,as as r,at as s,aL as d,j as t,az as v,aC as k,F as B,aM as P,y as I,aA as j,aw as b,aB as x,ay as z,aF as F,au as L}from"./index.e125f141.js";import{Q as M}from"./QPage.740ac07b.js";import{u as q}from"./picture.35b01417.js";import{u as A}from"./app.4d423b5b.js";import{u as N}from"./use-quasar.9041e38c.js";const T=C({name:"IndexPage",setup(){const a=N(),m=A(),p=q(),n=u([]),i=u(!1),_=u("background: url('../assets/pictures/IMG_20230824_193519_Bokeh.jpg')");function c(){return f()}function e(){i.value=!0,m.$patch({appTitle:"Accueil"}),g()}S(async()=>{e()});function l(o){return`background: url('../assets/pictures/${o}')`}function f(){return Math.floor(Math.random()*(20- -20+1))+-20}async function g(){try{const o=await p.getPictures();o||a.notify({message:"Failed to get data",color:"negative",icon:"report_problem",position:"top",timeout:2500}),n.value=o,n.value.forEach(y=>{y.rotate=f()})}catch{a.notify({message:"Failed to get data",color:"negative",icon:"report_problem",position:"top",timeout:2500})}finally{i.value=!1}}return{getRotation:c,getPicture:l,pictures:n,getData:g,isLoading:i,url:_}}}),V={key:0,class:"row"},D={key:0},E={class:"row justify-center"},G={class:"text-h4 text-center font-caveat text-bold text-primary"};function R(a,m,p,n,i,_){const c=w("router-link");return s(),h(M,{class:"page row justify-center items-center bg-secondary"},{default:r(()=>[a.isLoading?(s(),d("div",V,[t(Q,{color:"accent",size:"2em"})])):v("",!0),t(I,null,{default:r(()=>[a.isLoading?v("",!0):(s(),d("div",D,[k("div",E,[(s(!0),d(B,null,P(a.pictures,(e,l)=>(s(),h(j,{key:l,style:b({transform:`rotate(${e.rotate}deg)`}),class:"col-1-md q-ma-lg card bg-grey-lighter"},{default:r(()=>[t(c,{to:`/picture/${e.id}`},{default:r(()=>[t(x,{style:b({backgroundImage:`url('https://feijao-app.s3.eu-central-1.amazonaws.com/${e.url}')`}),class:"card__image"},null,8,["style"]),t(x,{class:"q-py-md bg-grey-lighter"},{default:r(()=>[k("div",G,z(e.title),1)]),_:2},1024),t(F,{align:"right"},{default:r(()=>[t(L,{size:"sm",flat:"",dense:"",color:"primary",icon:"comment",label:e.comment_count},null,8,["label"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1032,["style"]))),128))])]))]),_:1})]),_:1})}var X=$(T,[["render",R],["__scopeId","data-v-5f217390"]]);export{X as default};
