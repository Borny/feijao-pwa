import{aa as k,ad as L,ac as S,a as c,r,o as B,ar as h,aj as s,ah as u,T as q,ai as b,aL as w,aH as g,a0 as _,ak as F,ap as I,aE as A,aF as N,as as P}from"./index.886762cb.js";import{u as Q}from"./use-quasar.0e1b00a7.js";import{u as T}from"./app.b9f1ac3e.js";const C={name:"AdminLogin",setup(){const t=Q(),o=T(),n=L(),e=S(),m=c(()=>n.isAuth),p=c(()=>l.value&&l.value.length>=4),a=c(()=>l.value&&l.value.length<6),v=r(""),f=r(""),l=r(null),d=r(!1),y=r(!1);function x(){o.$patch({appTitle:"Login"}),y.value=!0}B(async()=>{x()});async function V(){d.value=!0;try{const i=await n.login(f.value,l.value);i||t.notify({message:"Please check your name or birthday",color:"negative"}),console.log("should work",i),e.replace("/home")}catch(i){console.error(i),t.notify({message:"Please check your name or birthday",color:"negative"})}finally{d.value=!1}}return{authStore:n,loginSuccess:v,isAuth:m,submit:V,displayForm:y,name:f,birthday:l,isBirthdayValid:p,birthdayTooShort:a,isLoading:d}}},M=t=>(A("data-v-577d7258"),t=t(),N(),t),j={class:"row flex-center container bg-primary"},E=M(()=>P("div",{class:"text-h3 q-ma-xl text-center text-info font-keep-on-truckin"},"Feij\xE3o M\xE1gico",-1));function U(t,o,n,e,m,p){return b(),h("div",j,[s(q,null,{default:u(()=>[e.displayForm?(b(),h("form",{key:0,class:"column items-center form",onSubmit:o[2]||(o[2]=w((...a)=>e.submit&&e.submit(...a),["prevent"]))},[E,s(g,{clearable:"",disable:e.isLoading,type:"text",color:"info","label-color":"info",modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.name=a),label:"Name",placeholder:"Name",class:"q-mb-sm control",rules:[a=>!!a||"Field is required"]},{prepend:u(()=>[s(_,{color:"info",name:"account_circle"})]),_:1},8,["disable","modelValue","rules"]),s(g,{clearable:"",disable:e.isLoading,type:"password",color:"info","label-color":"info",placeholder:"Birthday",label:"Birthday",modelValue:e.birthday,"onUpdate:modelValue":o[1]||(o[1]=a=>e.birthday=a),class:"q-mb-sm control",rules:[a=>!!a||"Field is required"]},{prepend:u(()=>[s(_,{color:"info",name:"key"})]),_:1},8,["disable","modelValue","rules"]),s(F,{rounded:"",color:"info","text-color":"primary",label:"Connexion",loading:e.isLoading,disabled:!e.name||!e.isBirthdayValid||e.isLoading,class:"q-mt-lg",type:"submit"},null,8,["loading","disabled"])],32)):I("",!0)]),_:1})])}var D=k(C,[["render",U],["__scopeId","data-v-577d7258"]]);export{D as default};
